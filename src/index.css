@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== FIXES CRITIQUES MOBILE - PRIORITÉ ABSOLUE ===== */
@layer base {
  /* 1. Fix immédiat du logo AVANT tout chargement */
  img[src*="Logo_TT_blanc"] {
    max-height: 50px !important;
    width: auto !important;
    height: auto !important;
  }
  
  @media (min-width: 768px) {
    img[src*="Logo_TT_blanc"] {
      max-height: 60px !important;
    }
  }
  
  @media (min-width: 1024px) {
    img[src*="Logo_TT_blanc"] {
      max-height: 80px !important;
    }
  }

  /* 2. Reset global anti-débordement */
  * {
    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    max-width: 100vw;
  }
  
  html {
    overflow-x: hidden !important;
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
    width: 100%;
    position: relative;
  }
  
  body {
    overflow-x: hidden !important;
    position: relative;
    width: 100% !important;
    max-width: 100vw !important;
    margin: 0;
    padding: 0;
  }
  
  #root {
    overflow-x: hidden !important;
    position: relative;
    width: 100% !important;
    max-width: 100vw !important;
    min-height: 100vh;
  }
  
  /* 3. Contraintes sur TOUS les conteneurs */
  main, section, article, aside, nav, header, footer, div {
    max-width: 100vw !important;
    overflow-x: hidden !important;
    position: relative;
  }
  
  /* 4. Images et médias */
  img, video, iframe, canvas, svg {
    max-width: 100% !important;
    height: auto;
    display: block;
    object-fit: contain;
  }
  
  /* 5. Éléments positionnés */
  [class*="absolute"], [class*="fixed"] {
    max-width: 100vw;
  }
  
  /* 6. DÉSACTIVATION FORCÉE DES ANIMATIONS MOBILE */
  @media (max-width: 768px) {
    /* Supprime TOUTES les animations problématiques */
    .logo-particles,
    .logo-halo,
    .particle,
    .cta-energy,
    .dropdown-glow,
    .poster-shine,
    .orb,
    .orb-1,
    .orb-2,
    .orb-3,
    .stars,
    .star,
    .gradient-mesh,
    [class*="gradient-"],
    [class*="float"],
    [class*="glow"],
    [class*="sparkle"] {
      display: none !important;
      animation: none !important;
      opacity: 0 !important;
    }
    
    /* Désactive les transforms complexes */
    * {
      -webkit-transform: translate3d(0, 0, 0) !important;
      -webkit-backface-visibility: hidden !important;
      perspective: none !important;
      transform-style: flat !important;
    }
    
    /* Simplifie les animations essentielles */
    @keyframes * {
      0%, 100% { transform: none !important; }
    }
    
    /* Désactive les filtres lourds */
    * {
      filter: none !important;
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
    }
    
    /* Override spécifique pour le carousel du Hero */
    .carousel-track {
      animation: none !important;
      display: none !important;
    }
    
    .background-carousel {
      display: none !important;
    }
  }
}

/* ===== AJUSTEMENTS RESPONSIVES ===== */
@layer components {
  @media (max-width: 768px) {
    /* Conteneurs sécurisés */
    .container, 
    [class*="container"],
    .nav-wrapper,
    .nav-content {
      padding-left: 1rem !important;
      padding-right: 1rem !important;
      max-width: 100% !important;
      width: 100% !important;
    }
    
    /* Navigation spécifique */
    .nav-container {
      width: 100% !important;
      max-width: 100vw !important;
      left: 0 !important;
      right: 0 !important;
    }
    
    .logo-img {
      max-height: 50px !important;
      width: auto !important;
    }
    
    /* Flex et Grid responsifs */
    [class*="flex"] {
      flex-wrap: wrap;
      max-width: 100%;
    }
    
    [class*="grid"] {
      grid-template-columns: 1fr !important;
      gap: 1rem !important;
      max-width: 100%;
    }
    
    /* Textes sans débordement */
    h1, h2, h3, h4, h5, h6, p, span, a {
      word-break: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
      max-width: 100%;
    }
    
    /* Boutons et liens */
    button, a {
      max-width: 100%;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    /* Cache les éléments décoratifs */
    .desktop-only {
      display: none !important;
    }
  }
}

/* ===== VOS CLASSES UTILITAIRES (SIMPLIFIÉES POUR MOBILE) ===== */
@layer utilities {
  .text-glow {
    text-shadow: 0 0 30px rgba(255, 255, 255, 0.2);
  }
  
  @media (max-width: 768px) {
    .text-glow {
      text-shadow: none;
    }
  }

  .text-glow-strong {
    text-shadow: 0 0 30px rgba(255, 255, 255, 0.4);
  }
  
  @media (max-width: 768px) {
    .text-glow-strong {
      text-shadow: none;
    }
  }

  .glass-effect {
    @apply bg-white/5 border border-white/10;
  }
  
  @media (max-width: 768px) {
    .glass-effect {
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
    }
  }

  .glass-card {
    @apply bg-white/5 border border-white/10 hover:border-white/20 transition-all duration-500;
  }
  
  @media (max-width: 768px) {
    .glass-card {
      backdrop-filter: none !important;
      -webkit-backdrop-filter: none !important;
    }
  }

  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r;
  }

  .perspective-1000 {
    perspective: 1000px;
  }
  
  @media (max-width: 768px) {
    .perspective-1000 {
      perspective: none;
    }
  }

  .preserve-3d {
    transform-style: preserve-3d;
  }
  
  @media (max-width: 768px) {
    .preserve-3d {
      transform-style: flat;
    }
  }
  
  /* Classes helper critiques */
  .mobile-safe {
    @apply max-w-full overflow-x-hidden;
  }
  
  .no-overflow {
    overflow: hidden !important;
  }
}

/* ===== ANIMATIONS (DÉSACTIVÉES SUR MOBILE) ===== */
@media (min-width: 769px) {
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-20px); }
  }

  @keyframes pulse-glow {
    0%, 100% { opacity: 0.1; }
    50% { opacity: 0.3; }
  }

  @keyframes rotate-slow {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  @keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  @keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  .animate-float {
    animation: float 6s ease-in-out infinite;
  }

  .animate-pulse-glow {
    animation: pulse-glow 4s ease-in-out infinite;
  }

  .animate-rotate-slow {
    animation: rotate-slow 20s linear infinite;
  }

  .animate-gradient-shift {
    animation: gradient-shift 15s ease infinite;
    background-size: 200% 200%;
  }

  .animate-shimmer {
    animation: shimmer 2s infinite;
  }

  .animate-spin-slow {
    animation: rotate-slow 20s linear infinite;
  }
}

/* Sur mobile, pas d'animations */
@media (max-width: 768px) {
  .animate-float,
  .animate-pulse-glow,
  .animate-rotate-slow,
  .animate-gradient-shift,
  .animate-shimmer,
  .animate-spin-slow {
    animation: none !important;
  }
}

/* ===== AUTRES STYLES ===== */
.perspective {
  perspective: 2000px;
}

@media (max-width: 768px) {
  .perspective {
    perspective: none;
  }
}

.preserve-3d {
  transform-style: preserve-3d;
}

@media (max-width: 768px) {
  .preserve-3d {
    transform-style: flat;
  }
}

.backface-hidden {
  backface-visibility: hidden;
}

.transform-gpu {
  transform: translate3d(0, 0, 0);
  backface-visibility: hidden;
  transform-style: preserve-3d;
}

@media (max-width: 768px) {
  .transform-gpu {
    transform: none !important;
    transform-style: flat !important;
  }
}

/* Scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* Selection */
::selection {
  background: rgba(236, 72, 153, 0.3);
  color: white;
}

/* ===== SÉCURITÉ MAXIMALE FINALE ===== */
@media (max-width: 768px) {
  /* Force absolue contre tout débordement */
  html, body, #root, main {
    position: relative !important;
    overflow-x: hidden !important;
    overflow-y: auto !important;
    max-width: 100vw !important;
    width: 100% !important;
  }
  
  /* Aucun élément ne peut dépasser */
  * {
    max-width: 100vw !important;
  }
  
  /* Navigation toujours contenue */
  .nav-container,
  .nav-wrapper,
  .mobile-menu {
    width: 100% !important;
    max-width: 100vw !important;
    left: 0 !important;
    right: 0 !important;
  }
}