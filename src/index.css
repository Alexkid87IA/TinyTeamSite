@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== PROTECTIONS MOBILE ESSENTIELLES ===== */
@layer base {
  /* Protection overflow de base */
  html, body {
    overflow-x: hidden;
    max-width: 100vw;
  }
  
  #root {
    overflow-x: hidden;
    max-width: 100vw;
  }
  
  /* Images responsives */
  img {
    max-width: 100%;
    height: auto;
  }
  
  /* Protection mobile uniquement */
  @media (max-width: 768px) {
    /* Conteneurs principaux */
    main, section, article, aside, nav, header, footer {
      max-width: 100vw;
      overflow-x: hidden;
    }
    
    /* Padding sécurisé */
    .container, [class*="container"] {
      padding-left: 1rem;
      padding-right: 1rem;
    }
  }
}

/* ===== VOS CLASSES UTILITAIRES ===== */
@layer utilities {
  .text-glow {
    text-shadow: 0 0 30px rgba(255, 255, 255, 0.2);
  }

  .text-glow-strong {
    text-shadow: 0 0 30px rgba(255, 255, 255, 0.4);
  }

  .glass-effect {
    @apply bg-white/5 backdrop-blur-[8px] border border-white/10;
  }

  .glass-card {
    @apply bg-white/5 backdrop-blur-[12px] border border-white/10 hover:border-white/20 transition-all duration-500;
  }

  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r;
  }

  .perspective-1000 {
    perspective: 1000px;
  }

  .preserve-3d {
    transform-style: preserve-3d;
  }
}

/* ===== ANIMATIONS ===== */
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { opacity: 0.1; }
  50% { opacity: 0.3; }
}

@keyframes rotate-slow {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

@keyframes gradient-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* Classes d'animation */
.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 4s ease-in-out infinite;
}

.animate-rotate-slow {
  animation: rotate-slow 20s linear infinite;
}

.animate-gradient-shift {
  animation: gradient-shift 15s ease infinite;
  background-size: 200% 200%;
}

.animate-shimmer {
  animation: shimmer 2s infinite;
}

.animate-spin-slow {
  animation: rotate-slow 20s linear infinite;
}

/* Perspective et 3D */
.perspective {
  perspective: 2000px;
}

.preserve-3d {
  transform-style: preserve-3d;
}

.backface-hidden {
  backface-visibility: hidden;
}

.transform-gpu {
  transform: translate3d(0, 0, 0);
  backface-visibility: hidden;
  transform-style: preserve-3d;
}

/* ===== SCROLLBAR CUSTOM ===== */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.1);
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* ===== SELECTION ===== */
::selection {
  background: rgba(236, 72, 153, 0.3);
  color: white;
}

/* ===== OPTIMISATIONS MOBILE LÉGÈRES ===== */
@media (max-width: 768px) {
  /* Réduit la complexité des animations sur mobile */
  .animate-float,
  .animate-pulse-glow,
  .animate-rotate-slow {
    animation-duration: 10s;
  }
  
  /* Simplifie les effets de blur sur mobile pour la performance */
  .glass-effect,
  .glass-card {
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }
}

/* ===== CORRECTIONS MOBILES CRITIQUES - FOND UNIFORME ===== */
@media (max-width: 768px) {
  /* Force le fond uniforme sur TOUTES les sections */
  body,
  main,
  #root,
  section,
  .hero-section,
  .artists-slider-section,
  .story-section,
  .mission-section,
  .contact-section,
  .footer,
  div[class*="section"] {
    background: #0a0a1f !important;
    background-color: #0a0a1f !important;
    background-image: none !important;
  }
  
  /* Supprime TOUS les effets de fond et gradients */
  .hero-section::before,
  .hero-section::after,
  .story-bg-effects,
  .mission-background,
  .contact-bg-effects,
  .gradient-mesh,
  .gradient-radial-1,
  .gradient-radial-2,
  .gradient-radial-3,
  .bg-gradient-overlay,
  div[class*="gradient"],
  div[class*="bg-"],
  div[class*="background"],
  *::before,
  *::after {
    background-image: none !important;
    opacity: 0 !important;
    display: none !important;
  }
  
  /* Garde visible les éléments importants */
  .panel-container::before,
  .panel-number::after,
  .feature-card::before,
  .footer-cta::before {
    display: block !important;
    opacity: 1 !important;
  }
  
  /* Espacement section Mission */
  .mission-section {
    padding-top: 6rem !important;
    padding-bottom: 4rem !important;
  }
  
  /* Espacement header Mission */
  .mission-header {
    margin-bottom: 3rem !important;
    padding: 0 1rem !important;
  }
  
  /* Titre "Nos Services" */
  .mission-header .main-title {
    font-size: 3rem !important;
    line-height: 1.1 !important;
    margin-bottom: 1.5rem !important;
  }
  
  .mission-header .title-word-1 {
    color: white !important;
  }
  
  .mission-header .title-word-2 {
    background: linear-gradient(45deg, #ec4899, #a855f7, #3b82f6) !important;
    background-clip: text !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
  }
  
  /* Sous-titre */
  .mission-header .subtitle {
    text-align: center !important;
    font-size: 1rem !important;
    color: rgba(255, 255, 255, 0.7) !important;
  }
  
  /* Panneaux de services */
  .services-cascade {
    padding: 0 1rem !important;
  }
  
  .service-panel {
    margin-bottom: 1rem !important;
  }
  
  .panel-header {
    padding: 1.2rem 3rem 1.2rem 4rem !important;
    min-height: 75px !important;
  }
  
  .panel-number {
    width: 35px !important;
    height: 35px !important;
    left: 0.8rem !important;
    font-size: 0.9rem !important;
  }
  
  .panel-title {
    font-size: 1rem !important;
    line-height: 1.2 !important;
  }
  
  .panel-subtitle {
    font-size: 0.7rem !important;
    line-height: 1.2 !important;
  }
  
  .panel-toggle {
    width: 30px !important;
    height: 30px !important;
    right: 0.8rem !important;
  }
  
  .panel-icon-wrapper {
    display: none !important;
  }
}